// Generated by CoffeeScript 1.10.0
var _app, fs, getViewDir, path, pug, setViewDir;

fs = require('fs');

path = require('path');

pug = require('pug');

module.exports.pug = pug;

_app = null;

setViewDir = (function(_this) {
  return function(viewsPath, callback) {
    if (_app == null) {
      return;
    }
    console.log("seeting: " + viewsPath);
    _app.set('views', path);
    return fs.stat(viewsPath, function(e, stat) {
      if (e) {
        console.log("views directory not found at " + viewsPath + ". creating");
        fs.mkDir(viewsPath, function(e, res) {
          if (e != null) {
            return console.log(e);
          }
        });
      }
      return callback();
    });
  };
})(this);

getViewDir = (function(_this) {
  return function() {
    if (_app == null) {
      return null;
    }
    return _app.get('views');
  };
})(this);

module.exports.setViewDir = setViewDir;

module.exports.getViewDir = getViewDir;

module.exports.init = function(app, options, callback) {
  var cB, viewsPath;
  if (typeof (cB = arguments[arguments.length - 1]) !== 'function') {
    throw "apihero-module-pug::init - callback required";
  }
  _app = app;
  if (!((options != null) && typeof options === 'object')) {
    options = {};
  }
  viewsPath = options.hasOwnProperty('viewsPath') ? options.viewsPath : app.get('views');
  if (viewsPath) {
    return callback(null);
  } else {
    return setViewsDir(path.join(app_root, 'views'), callback);
  }
};
